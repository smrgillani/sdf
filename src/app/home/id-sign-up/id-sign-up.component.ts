import { Component, OnInit, ViewChild, Input, Output, EventEmitter } from '@angular/core';
import { Router } from '@angular/router';
import { NgbPopover } from '@ng-bootstrap/ng-bootstrap';
import * as _ from 'lodash';
import { FormGroup, FormBuilder, NgForm } from '@angular/forms';
import UserProfileModel from 'app/core/models/UserProfileModel';
import { WebCamComponent } from 'ack-angular-webcam';
import { IdSignUpModel, CapturedInfo } from 'app/core/models/id-sign-up-model';
import { SignupService } from 'app/auth/signup.service';
import { LoaderService } from 'app/loader.service';

@Component({
  selector: 'app-id-sign-up',
  templateUrl: './id-sign-up.component.html',
  styleUrls: [
    '../login/login.component.scss',
    '../signup/signup.component.portrait.css',
    './id-sign-up.component.scss'
  ],
})

export class IdSignUpComponent implements OnInit {
  flagPassportID: boolean = false;
  webCamMissing: boolean = false;
  public webcam;
  private profile: UserProfileModel;
  selectedphoto: any;
  selectedphotoback: any;
  @Input() idmethod: string = 'passport';
  @Output() idstage: EventEmitter<CapturedInfo> = new EventEmitter<CapturedInfo>();
  isStage: string = "getIdStage";
  makeImage: boolean = false;
  signUpInfo: IdSignUpModel;
  objKeyMessage: any;
  isVerified: boolean = false;
  isVerifiedError: boolean = false;

  constructor(
    private router: Router,
    private formBuilder: FormBuilder,
    private signupService: SignupService,
    private loaderService: LoaderService
  ) {
    this.profile = new UserProfileModel();
    this.signUpInfo = new IdSignUpModel();

  }

  ngOnInit() {

    console.log("this.idmethod" + this.idmethod);
    const image: HTMLImageElement = new Image();
    image.src = "";
    this.signUpInfo.id_type = this.idmethod;

  }

  // this.user.photo_bounds = photoBounds;
  // this.user.photo = this.data.original.src;
  // this.user.photo_crop = this.data.image;

  // updateDropTemplate() {
  //   if (this.profile.passport_photo) {
  //     this.flagPassportID = true;
  //   }
  // }

  /**
   * Callback called after new photo was chosen
   */
  imageChangeListener($event, document: string) {
    this.signUpInfo.frontImage = this.selectedphoto = $event.src;
    // this.updateDropTemplate();
    //  this.cropper.setImage($event);
  }

  /**
   * Callback called after new photo was chosen
   */
  imageChangeListenerback($event, document: string) {
    this.signUpInfo.backImage = this.selectedphotoback = $event.src;
    // this.updateDropTemplate();
    //  this.cropper.setImage($event);
  }



  onCamSuccess(photo) {
    this.webCamMissing = false;
  }

  onCamError(err) {
    this.webCamMissing = true;
  }

  makeWebCameraPhoto() {
    const that = this;
    this.webcam.getBase64()
      .then((base64) => {
        const image: HTMLImageElement = new Image();
        image.src = base64;

        // const internalImg = Object.assign({}, base64);
        // const photoBounds = {
        //   x: 700,
        //   y: 0,
        //   width: 900,
        //   height: 900
        // };

        this.signUpInfo.capturedImage = base64;

        //this.signUpInfo.capturedImage = 'data:image/jpeg;base64,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';
        //base64;
        
        this.makeImage = true;

      })
      .catch(e => console.error(e));
  }

  deleteCameraPhoto() {
    this.signUpInfo.capturedImage = "";
    this.makeImage = false;
  }

  savepic() {
    this.isStage = 'faceVerification';
    this.makeImage = false;
  }


  senddata(): void {
    this.signUpInfo.capturedInfo.isStage = this.isStage = 'completeState';
    this.idstage.emit(this.signUpInfo.capturedInfo);
  }

  setIdentificationInfo(form) {
    this.signUpInfo.mrz = (this.signUpInfo.line1 || this.signUpInfo.line2 || this.signUpInfo.line3) ? true : false;
    this.signUpInfo.backImage = this.signUpInfo.backImage && this.signUpInfo.backImage != '' ? this.signUpInfo.backImage : null;

    this.signupService.checkIdVerification(this.signUpInfo).subscribe((info) => {
      this.signUpInfo.capturedInfo = info.status;
      
      if (this.idmethod == 'passport') {
        this.signUpInfo.capturedInfo.passport_photo = this.signUpInfo.frontImage;
        this.signUpInfo.capturedInfo.driver_license_photo = null;
        this.signUpInfo.capturedInfo.driver_license_back_photo = null;
      }
      else {
        this.signUpInfo.capturedInfo.driver_license_photo = this.signUpInfo.frontImage;  
        this.signUpInfo.capturedInfo.driver_license_back_photo = this.signUpInfo.backImage;
        this.signUpInfo.capturedInfo.passport_photo = null;
      }      

      this.signUpInfo.capturedInfo.fullname = this.signUpInfo.capturedInfo.fname + ' ' + this.signUpInfo.capturedInfo.lname;
      
      this.isStage = 'captureInfo';
    }, (errorMsg: any) => {
      console.log(errorMsg);
      this.checkForErrors(errorMsg, form);
    });
  }

  verifyFaceWithDocumentInfo(form) {
    this.signupService.verifyFaceWithDocumentInfo({id_number: null, candidateImages: this.signUpInfo.capturedImage.split(',')[1], referenceImages: this.signUpInfo.frontImage.split(',')[1]}).subscribe((info) => {
      if(info.status !="Face analysis failed") {
        
        this.isVerified = true;
        this.isVerifiedError = false;
      }
      else {
        this.isVerifiedError = true;
      }
    }, (errorMsg: any) => {
      console.log(errorMsg);
      this.checkForErrors(errorMsg, form);
    });
  }

  checkForErrors(errorMsg, form?) {
    let newErr = {};
    this.objKeyMessage = errorMsg;
    Object.keys(errorMsg).forEach((err) => {
      newErr[err] = true;
      form && form.controls[err] ? form.controls[err].setErrors(newErr)
        : form.controls['non_field_errors'].setErrors(newErr);
    });
  }
}